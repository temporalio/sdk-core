[package]
name = "temporal-sdk-core"
version = "0.1.0"
authors = ["Spencer Judge <spencer@temporal.io>", "Vitaly Arbuzov <vitaly@temporal.io>"]
edition = "2018"

[features]
default = []
integ_tests = []

[lib]

# TODO: Feature flag opentelem stuff
[dependencies]
anyhow = "1.0"
async-trait = "0.1"
dashmap = "4.0"
derive_more = "0.99"
env_logger = "0.8"
futures = "0.3"
log = "0.4"
opentelemetry-jaeger = "0.10"
prost = "0.7"
prost-types = "0.7"
thiserror = "1.0"
tokio = { version = "1.1", features = ["rt", "rt-multi-thread"] }
tracing = { version = "0.1", features = ["log"] }
tracing-opentelemetry = "0.11"
tracing-subscriber = "0.2"
url = "2.2"
tower = "0.4.4"

[dependencies.tonic]
version = "0.4"
path = "../tonic/tonic"

[dependencies.rustfsm]
path = "fsm"

[dev-dependencies]
assert_matches = "1.4"
mockall = "0.9"
rstest = "0.6"

[build-dependencies]
tonic-build = "0.4"

[workspace]
members = [".", "fsm"]

[[test]]
name = "poller_test"
path = "tests/poller_test.rs"
required-features = ["integ_tests"]